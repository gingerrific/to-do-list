"use strict";var ToDoItem=Backbone.Model.extend({idAttribute:"_id",defaults:{toDo:""}}),ToDoCollection=Backbone.Collection.extend({model:ToDoItem,url:"http://tiny-pizza-server.herokuapp.com/collections/gingerrific"}),ToDoView=Backbone.View.extend({renderTemplate:_.template($(".to-do-line-item").text()),editTemplate:_.template($(".edit-line-item").text()),events:{"click .remove-image":"removeLine","click .to-do-line":"editLine","keydown .edit-line":"makeChanges","click .status-image":"markDone"},initialize:function(){this.listenTo(this.model,"change",this.render),$(".item-container").append(this.el),this.render()},render:function(){var a=this.renderTemplate(this.model.attributes);this.$el.html(a)},removeLine:function(){this.model.destroy(),this.remove()},editLine:function(){var a=this.editTemplate(this.model.attributes);this.$el.html(a)},makeChanges:function(a){var b=$(".edit-line").val();13==a.keyCode&&(this.model.set("toDo",b),this.model.save())},markDone:function(){this.$el.find(".status-image").toggleClass("completed"),this.$el.find(".to-do-line").toggleClass("strikethrough")}}),InputView=Backbone.View.extend({initialize:function(){this.toDoList=new ToDoCollection,this.toDoList.fetch(),this.listenTo(this.toDoList,"add",function(a){new ToDoView({model:a})});var a=this;$(".next-item").click(function(){a.createNewToDo()}),$(".up-next").keypress(function(b){13==b.keyCode&&a.createNewToDo()}),$(".up-next").focus()},createNewToDo:function(){var a=$(".up-next").val();this.toDoList.add({toDo:a}).save(),$(".up-next").val("")}});new InputView;